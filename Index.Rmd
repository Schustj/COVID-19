---
title: "Index.Rmd"
output: html_document
---

```{r setup, include=FALSE, echo = FALSE}
library(tidyverse)
library(stringr)
library(choroplethr)
library(choroplethrMaps)
library(ggplot2)
library(dplyr)
library(knitr)
library(kableExtra)
knitr::opts_chunk$set(echo = TRUE)
```

```{r importing, message = FALSE, echo = FALSE}
data(state.regions)
myData <- read_csv("raw_data/US_MAP_DATA.csv", skip = 2)
myData2 <- read_csv("raw_data/Provisional_COVID-19_Death_Counts_by_Place_of_Death_and_State.csv")

```

```{r tidyup, message=FALSE, echo=FALSE, warning=FALSE}

deathData <- myData %>% 
        rename(Deaths = "Total Death") %>%
        filter(fips < 57, abbr != "US" & jurisdiction %in% c("Michigan", "Ohio", "Wisconsin", "Minnesota", "Illinois", "Indiana", "Kentucky") & !is.na(jurisdiction)) %>%
        summarise(region = str_to_lower(jurisdiction), value = Deaths)

write.csv(deathData,"C:/Users/Jonny/Documents/GitHub/COVID-19/output/deaths_by_state_midwest_coalition.csv", row.names = FALSE)

```

```{r choropleth, message=FALSE, echo=FALSE, warning=FALSE, fig.align='center', fig.cap="**Choropleth 1:** Total Deaths from State in Midwest Coalition"}

state_choropleth(deathData, title = "Total Deaths", legend = "Deaths")

```

```{r tidyup2, message=FALSE, echo=FALSE, warning=FALSE}

deathData2 <- myData %>% 
        rename(Deaths = "Total Death") %>%
        filter(fips < 57, abbr != "US" & jurisdiction %in% c("New Jersey", "Georgia", "Maryland", "Colorado", "Pennsylvania", "Tennessee", "Louisiana")) %>%
        summarise(region = str_to_lower(jurisdiction), value = Deaths)

write.csv(deathData,"C:/Users/Jonny/Documents/GitHub/COVID-19/output/deaths_by_state_similar_pop.csv", row.names = FALSE)

```

```{r choropleth2, message=FALSE, echo=FALSE, warning=FALSE}

state_choropleth(deathData2, title = "Total Deaths", legend = "Deaths")

```










